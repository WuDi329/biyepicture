g++ -O2 -g -Wall -no-pie -static -static-libstdc++ -static-libgcc -o memtier_benchmark memtier_benchmark-memtier_benchmark.o memtier_benchmark-client.o memtier_benchmark-cluster_client.o memtier_benchmark-shard_connection.o memtier_benchmark-run_stats_types.o memtier_benchmark-run_stats.o memtier_benchmark-JSON_handler.o memtier_benchmark-protocol.o memtier_benchmark-obj_gen.o memtier_benchmark-item.o memtier_benchmark-file_io.o memtier_benchmark-config_types.o deps/hdr_histogram/memtier_benchmark-hdr_histogram_log.o deps/hdr_histogram/memtier_benchmark-hdr_histogram.o deps/hdr_histogram/memtier_benchmark-hdr_time.o deps/hdr_histogram/memtier_benchmark-hdr_encoding.o  /home/wudi/temp/lib64/libssl.a /home/wudi/temp/lib64/libcrypto.a /home/wudi/temp/lib/libevent.a /home/wudi/temp/lib/libevent_openssl.a /usr/lib/x86_64-linux-gnu/libpthread.a /usr/lib/x86_64-linux-gnu/libz.a /usr/lib/x86_64-linux-gnu/libpcre.a /usr/lib/x86_64-linux-gnu/libc.a /usr/lib/gcc/x86_64-linux-gnu/9/libstdc++.a /usr/lib/x86_64-linux-gnu/libm.a -Wl,--no-as-needed -ldl

gcc -o ../bin/perfer ./queue.o ./arg.o ./perfer.o ./stagger.o ./pool.o ./dtime.o ./drop.o -static -lm -lpthread -lssl -lcrypto -lpthread -Wl,--no-as-needed -ldl


g++ -fno-rtti simple_example.cc -osimple_example ../librocksdb.a -I../include -O2 -std=c++17 /lib/x86_64-linux-gnu/libpthread.a /lib/x86_64-linux-gnu/librt.a /lib/x86_64-linux-gnu/libsnappy.a /lib/x86_64-linux-gnu/libgflags.a /lib/x86_64-linux-gnu/libz.a /lib/x86_64-linux-gnu/libc.a /lib/x86_64-linux-gnu/libbz2.a /lib/x86_64-linux-gnu/liblz4.a /lib/x86_64-linux-gnu/libzstd.a /lib/x86_64-linux-gnu/libm.a /usr/lib/gcc/x86_64-linux-gnu/9/libstdc++.a -no-pie -static -static-libstdc++ -static-libgcc -std=c++17  -static-libstdc++  -static-libgcc -Wl,--no-as-needed -ldl -faligned-new -DHAVE_ALIGNED_NEW -DROCKSDB_PLATFORM_POSIX -DROCKSDB_LIB_IO_POSIX  -DOS_LINUX -fno-builtin-memcmp -DROCKSDB_FALLOCATE_PRESENT -DSNAPPY -DGFLAGS=1 -DZLIB -DBZIP2 -DLZ4 -DZSTD -DROCKSDB_MALLOC_USABLE_SIZE -DROCKSDB_PTHREAD_ADAPTIVE_MUTEX -DROCKSDB_BACKTRACE -DROCKSDB_RANGESYNC_PRESENT -DROCKSDB_SCHED_GETCPU_PRESENT -DROCKSDB_AUXV_GETAUXVAL_PRESENT -march=native   -DHAVE_SSE42  -DHAVE_PCLMUL  -DHAVE_AVX2  -DHAVE_BMI  -DHAVE_LZCNT -DHAVE_UINT128_EXTENSION -DROCKSDB_SUPPORT_THREAD_LOCAL 

gcc -Wl,-E -Lobj/lib -o wrk obj/wrk.o obj/net.o obj/ssl.o obj/aprintf.o obj/stats.o obj/script.o obj/units.o obj/ae.o obj/zmalloc.o obj/http_parser.o obj/bytecode.o obj/version.o -static  -lluajit-5.1 -lm -lssl -lcrypto -lpthread -Wl,--no-as-needed -ldl
